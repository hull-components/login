(function(){var e;e=function(e){var t,n;return t=!1,e(function(){var a;return a=(document.body||document.documentElement).style,t=void 0!==a.animation||void 0!==a.WebkitAnimation||void 0!==a.MozAnimation||void 0!==a.MsAnimation||void 0!==a.OAnimation,e(window).bind("keyup.vex",function(e){return 27===e.keyCode?n.closeByEscape():void 0})}),n={globalID:1,animationEndEvent:"animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",baseClassNames:{vex:"vex",content:"vex-content",overlay:"vex-overlay",close:"vex-close",closing:"vex-closing",open:"vex-open"},defaultOptions:{content:"",showCloseButton:!0,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",css:{},overlayClassName:"",overlayCSS:{},contentClassName:"",contentCSS:{},closeClassName:"",closeCSS:{}},open:function(t){return t=e.extend({},n.defaultOptions,t),t.id=n.globalID,n.globalID+=1,t.$vex=e("<div>").addClass(n.baseClassNames.vex).addClass(t.className).css(t.css).data({vex:t}),t.$vexOverlay=e("<div>").addClass(n.baseClassNames.overlay).addClass(t.overlayClassName).css(t.overlayCSS).data({vex:t}),t.overlayClosesOnClick&&t.$vexOverlay.bind("click.vex",function(t){return t.target===this?n.close(e(this).data().vex.id):void 0}),t.$vex.append(t.$vexOverlay),t.$vexContent=e("<div>").addClass(n.baseClassNames.content).addClass(t.contentClassName).css(t.contentCSS).append(t.content).data({vex:t}),t.$vex.append(t.$vexContent),t.showCloseButton&&(t.$closeButton=e("<div>").addClass(n.baseClassNames.close).addClass(t.closeClassName).css(t.closeCSS).data({vex:t}).bind("click.vex",function(){return n.close(e(this).data().vex.id)}),t.$vexContent.append(t.$closeButton)),e(t.appendLocation).append(t.$vex),n.setupBodyClassName(t.$vex),t.afterOpen&&t.afterOpen(t.$vexContent,t),setTimeout(function(){return t.$vexContent.trigger("vexOpen",t)},0),t.$vexContent},getAllVexes:function(){return e("."+n.baseClassNames.vex+':not(".'+n.baseClassNames.closing+'") .'+n.baseClassNames.content)},getVexByID:function(t){return n.getAllVexes().filter(function(){return e(this).data().vex.id===t})},close:function(e){var t;if(!e){if(t=n.getAllVexes().last(),!t.length)return!1;e=t.data().vex.id}return n.closeByID(e)},closeAll:function(){var t;return t=n.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(null!=t?t.length:void 0)?(e.each(t.reverse(),function(e,t){return n.closeByID(t)}),!0):!1},closeByID:function(a){var o,s,i,l,r;return s=n.getVexByID(a),s.length?(o=s.data().vex.$vex,r=e.extend({},s.data().vex),i=function(){return r.beforeClose?r.beforeClose(s,r):void 0},l=function(){return s.trigger("vexClose",r),o.remove(),e("body").trigger("vexAfterClose",r),r.afterClose?r.afterClose(s,r):void 0},t?(i(),o.unbind(n.animationEndEvent).bind(n.animationEndEvent,function(){return l()}).addClass(n.baseClassNames.closing)):(i(),l()),!0):void 0},closeByEscape:function(){var t,a,o;return o=n.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(null!=o?o.length:void 0)?(a=Math.max.apply(Math,o),t=n.getVexByID(a),t.data().vex.escapeButtonCloses!==!0?!1:n.closeByID(a)):!1},setupBodyClassName:function(){return e("body").bind("vexOpen.vex",function(){return e("body").addClass(n.baseClassNames.open)}).bind("vexAfterClose.vex",function(){return n.getAllVexes().length?void 0:e("body").removeClass(n.baseClassNames.open)})},hideLoading:function(){return e(".vex-loading-spinner").remove()},showLoading:function(){return n.hideLoading(),e("body").append('<div class="vex-loading-spinner '+n.defaultOptions.className+'"></div>')}}},"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):window.vex=e(jQuery)}).call(this),function(){var e;e=function(e,t){var n,a;return null==t?e.error("Vex is required to use vex.dialog"):(n=function(t){var n;return n={},e.each(t.serializeArray(),function(){return n[this.name]?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n},a={},a.buttons={YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary"},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(e){return e.data().vex.value=!1,t.close(e.data().vex.id)}}},a.defaultOptions={callback:function(){},afterOpen:function(){},message:"Message",input:'<input name="vex" type="hidden" value="_vex-empty-value" />',value:!1,buttons:[a.buttons.YES,a.buttons.NO],showCloseButton:!1,onSubmit:function(o){var s,i;return s=e(this),i=s.parent(),o.preventDefault(),o.stopPropagation(),i.data().vex.value=a.getFormValueOnSubmit(n(s)),t.close(i.data().vex.id)},focusFirstInput:!0},a.defaultAlertOptions={message:"Alert",buttons:[a.buttons.YES]},a.defaultConfirmOptions={message:"Confirm"},a.open=function(n){var o;return n=e.extend({},t.defaultOptions,a.defaultOptions,n),n.content=a.buildDialogForm(n),n.beforeClose=function(e){return n.callback(e.data().vex.value)},o=t.open(n),n.focusFirstInput&&o.find('input[type="submit"], textarea, input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="month"], input[type="number"], input[type="password"], input[type="search"], input[type="tel"], input[type="text"], input[type="time"], input[type="url"], input[type="week"]').first().focus(),o},a.alert=function(t){return"string"==typeof t&&(t={message:t}),t=e.extend({},a.defaultAlertOptions,t),a.open(t)},a.confirm=function(t){return"string"==typeof t?e.error("dialog.confirm(options) requires options.callback."):(t=e.extend({},a.defaultConfirmOptions,t),a.open(t))},a.prompt=function(t){var n;return"string"==typeof t?e.error("dialog.prompt(options) requires options.callback."):(n={message:'<label for="vex">'+(t.label||"Prompt:")+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+(t.placeholder||"")+'"  value="'+(t.value||"")+'" />'},t=e.extend({},n,t),a.open(t))},a.buildDialogForm=function(t){var n,o,s;return n=e('<form class="vex-dialog-form" />'),s=e('<div class="vex-dialog-message" />'),o=e('<div class="vex-dialog-input" />'),n.append(s.append(t.message)).append(o.append(t.input)).append(a.buttonsToDOM(t.buttons)).bind("submit.vex",t.onSubmit),n},a.getFormValueOnSubmit=function(e){return e.vex||""===e.vex?"_vex-empty-value"===e.vex?!0:e.vex:e},a.buttonsToDOM=function(n){var a;return a=e('<div class="vex-dialog-buttons" />'),e.each(n,function(o,s){var i;return i=e('<input type="'+s.type+'" />').val(s.text).addClass(s.className+" vex-dialog-button "+(0===o?"vex-first ":"")+(o===n.length-1?"vex-last ":"")).bind("click.vex",function(n){return s.click?s.click(e(this).parents("."+t.baseClassNames.content),n):void 0}),i.appendTo(a)}),a},a)},"function"==typeof define&&define.amd?define(["jquery","vex"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("vex")):window.vex.dialog=e(window.jQuery,window.vex)}.call(this);