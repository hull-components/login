<html>
<head>
  <title>Hull Components - {{options.sourceName}} - version: {{options.version}}</title>
  <link href="//hls3.s3.amazonaws.com/stylesheets/dashboard.css" rel="stylesheet">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="{{config.init.jsUrl}}/{{config.version}}/hull.js"></script>
  <script>
    function getParameterByName(name) {
      name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
      var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
          results = regex.exec(location.search);
      return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    }

    var DefaultConfig = {{{initConfig}}};

    var HullConfig = {
      orgUrl: getParameterByName('orgUrl')  || DefaultConfig.orgUrl,
      appId: getParameterByName('appId')  || DefaultConfig.appId,
      jsUrl: "http://js.hull.dev/dist",
      sources: {
        default: document.location.origin
      }
    };

    console.warn("HullConfig", HullConfig);
    Hull.init(HullConfig);

    window.addEventListener('message', function(e) {
      var message = e.data;
      if (message && message.event === 'ship.update') {
        console.warn("Ship update", message);
        Hull.emit('ship.update', message.ship);
      }
    }, false);
  </script>
</head>
<body>
  <div data-hull-component="login"></div>
</body>
</html>
